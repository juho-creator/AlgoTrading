# 변경된 API 요청
안타깝게도 [Alternative.me](https://alternative.me/crypto/fear-and-greed-index/#api)는 특정 시간대에 대한 API 요청을 지원하지 않습니다. 대신 오늘로부터 과거 데이터를 가져올 수 있습니다.</br></br>

예를 들어 오늘이 **2024년 2월 20일**이고, **2024년 2월 10일 ~ 2024년 2월 20일** 사이의 데이터를 원한다면,</br>
오늘부터 과거 데이터 11개를 다음과 같이 요청합니다:
```
https://api.alternative.me/fng/?limit=11&format=json&date_format=kr
```

그러나 위 접근 방식은 오늘을 제외한 데이터를 요청할 때 제한이 있습니다.</br> 
예를 들어 **2023년 10월 1일 ~ 10월 31일**의 데이터를 어떻게 요청할까요?

이 제한을 극복하기 위해 새로운 방법을 고안했습니다.</br>
오늘이 **2024년 2월 20일**이라고 가정합시다.</br></br>
그럼 데이터를 다음과 같은 방법으로 얻을 수 있습니다 :
1. 원하는 시간대의 시작일과 종료일을 얻는다
   - **2023년 10월 1일 ~ 10월 31일**
</br>

2. 오늘과 각 시작일과 종료일 간의 차이를 계산한다
   - **시작일과 오늘 간의 날짜 수 = 오늘 - 시작일 = 2024년 2월 20일 - 2023년 10월 31일 = 143**
   - **종료일과의 오늘 간의 날짜 수 = 오늘 - 종료일 = 2024년 2월 20일 - 2023년 10월 1일 = 112**
</br>

3. 종료일까지의 계산된 날짜 수에 대한 API 요청을 수행합니다.
```
https://api.alternative.me/fng/?limit={days_diff_start}&format=json&date_format=kr
```
- 예를 들어, 우리 예제에서 days_diff_start = 112일이므로 다음과 같은 API 호출을 합니다.
```
https://api.alternative.me/fng/?limit=112&format=json&date_format=kr
```
- 이를 통해 오늘부터 시작일까지의 모든 데이터를 가져올 수 있습니다. (**2023년 10월 1일 ~ 2024년 2월 20일**)
</br>

4. 마지막으로 위 과정에서 얻은 데이터를 days_diff_end에서 인덱싱하여 정리합니다.</br>
이렇게 하면 불필요한 데이터가 제거되고, (**2023년 10월 31일 ~ 2024년 2월 20일**) </br>
원하는 시간대의 데이터를 얻을 수 있게되죠! (**2023년 10월 1일 ~ 10월 31일**)

따라서 위 변형된 API 요청 및 데이터 정제를 통해 특정 시간대의 공포 탐욕 지수를 얻을 수 있습니다.

</br></br>

# 다이어그램
![KakaoTalk_20240220_212633034](https://github.com/juho-creator/Crypto_AlgoTrading/assets/72856990/b0472066-491a-4fe0-83af-c22a9aa2912b)

